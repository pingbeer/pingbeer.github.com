<!DOCTYPE html>
<html class=" -moz-" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <!--<link rel="stylesheet" href="http://sy0739.cc/360/photo-sphere-viewer.min.css">-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photo-sphere-viewer@3.2.4/dist/photo-sphere-viewer.min.css">
    <!--<link rel="stylesheet" href="http://ohsq4wr4p.bkt.clouddn.com/photo-sphere-viewer.min.css">-->

    <script src="https://cdn.bootcss.com/zepto/1.0rc1/zepto.min.js"></script>
    <script src="https://cdn.bootcss.com/three.js/r83/three.min.js"></script>
    <!--<script src="http://ohsq4wr4p.bkt.clouddn.com/three.min.js"></script>-->
    <!--<script src="http://sy0739.cc/360/device.js"></script>-->
    <script>
//    <script src="http://sy0739.cc/360/D.min.js">
        /* (c) Jonathan Gotti - licence: https://github.com/malko/d.js/LICENCE.txt @version 0.7.5*/
        !function(a){"use strict";function b(a){l(function(){throw a})}function c(b){return this.then(b,a)}function d(b){return this.then(a,b)}function e(b,c){return this.then(function(a){return m(b)?b.apply(null,n(a)?a:[a]):v.onlyFuncs?a:b},c||a)}function f(a){function b(){a()}return this.then(b,b),this}function g(a){return this.then(function(b){return m(a)?a.apply(null,n(b)?b.splice(0,0,void 0)&&b:[void 0,b]):v.onlyFuncs?b:a},function(b){return a(b)})}function h(c){return this.then(a,c?function(a){throw c(a),a}:b)}function i(a,b){var c=q(a);if(1===c.length&&n(c[0])){if(!c[0].length)return v.fulfilled([]);c=c[0]}var d=[],e=v(),f=c.length;if(f)for(var g=function(a){c[a]=v.promisify(c[a]),c[a].then(function(g){d[a]=b?c[a]:g,--f||e.resolve(d)},function(g){b?(d[a]=c[a],--f||e.resolve(d)):e.reject(g)})},h=0,i=f;i>h;h++)g(h);else e.resolve(d);return e.promise}function j(a,b){return a.then(m(b)?b:function(){return b})}function k(a){var b=q(a);1===b.length&&n(b[0])&&(b=b[0]);for(var c=v(),d=0,e=b.length,f=v.resolved();e>d;d++)f=j(f,b[d]);return c.resolve(f),c.promise}var l,m=function(a){return"function"==typeof a},n=function(a){return Array.isArray?Array.isArray(a):a instanceof Array},o=function(a){return!(!a||!(typeof a).match(/function|object/))},p=function(b){return b===!1||b===a||null===b},q=function(a,b){return[].slice.call(a,b)},r="undefined",s=typeof TypeError===r?Error:TypeError;if(typeof process!==r&&process.nextTick)l=process.nextTick;else if(typeof MessageChannel!==r){var t=new MessageChannel,u=[];t.port1.onmessage=function(){u.length&&u.shift()()},l=function(a){u.push(a),t.port2.postMessage(0)}}else l=function(a){setTimeout(a,0)};var v=function(b){function i(){if(0!==r){var a,b=t,c=0,d=b.length,e=~r?0:1;for(t=[];d>c;c++)(a=b[c][e])&&a(n)}}function j(a){function b(a){return function(b){return c?void 0:(c=!0,a(b))}}var c=!1;if(r)return this;try{var d=o(a)&&a.then;if(m(d)){if(a===u)throw new s("Promise can't resolve itself");return d.call(a,b(j),b(k)),this}}catch(e){return b(k)(e),this}return q(function(){n=a,r=1,i()}),this}function k(a){return r||q(function(){try{throw a}catch(b){n=b}r=-1,i()}),this}var n,q=(a!==b?b:v.alwaysAsync)?l:function(a){a()},r=0,t=[],u={then:function(a,b){var c=v();return t.push([function(b){try{p(a)?c.resolve(b):c.resolve(m(a)?a(b):v.onlyFuncs?b:a)}catch(d){c.reject(d)}},function(a){if((p(b)||!m(b)&&v.onlyFuncs)&&c.reject(a),b)try{c.resolve(m(b)?b(a):b)}catch(d){c.reject(d)}}]),0!==r&&q(i),c.promise},success:c,error:d,otherwise:d,apply:e,spread:e,ensure:f,nodify:g,rethrow:h,isPending:function(){return 0===r},getStatus:function(){return r}};return u.toSource=u.toString=u.valueOf=function(){return n===a?this:n},{promise:u,resolve:j,fulfill:j,reject:k}};if(v.deferred=v.defer=v,v.nextTick=l,v.alwaysAsync=!0,v.onlyFuncs=!0,v.resolve=v.resolved=v.fulfilled=function(a){return v(!0).resolve(a).promise},v.reject=v.rejected=function(a){return v(!0).reject(a).promise},v.wait=function(a){var b=v();return setTimeout(b.resolve,a||0),b.promise},v.delay=function(a,b){var c=v();return setTimeout(function(){try{c.resolve(m(a)?a.apply(null):a)}catch(b){c.reject(b)}},b||0),c.promise},v.promisify=function(a){return a&&m(a.then)?a:v.resolved(a)},v.all=function(){return i(arguments,!1)},v.resolveAll=function(){return i(arguments,!0)},v.sequence=function(){return k(arguments)},v.nodeCapsule=function(a,b){return b||(b=a,a=void 0),function(){var c=v(),d=q(arguments);d.push(function(a,b){a?c.reject(a):c.resolve(arguments.length>2?q(arguments,1):b)});try{b.apply(a,d)}catch(e){c.reject(e)}return c.promise}},"function"==typeof define&&define.amd)define("D.js",[],function(){return v});else if(typeof module!==r&&module.exports)module.exports=v;else if(typeof window!==r){var w=window.D;v.noConflict=function(){return window.D=w,v},window.D=v}}();
    </script>
    <script src="http://sy0739.cc/360/uevent.min.js"></script>
    <script src="http://sy0739.cc/360/doT.min.js"></script>
    <!--<script src="http://sy0739.cc/360/photo-sphere-viewer.min.js"></script>-->
    <!--<script src="http://sy0739.cc/360/photo-sphere-viewer.min.js"></script>-->
    <script src="https://cdn.jsdelivr.net/npm/photo-sphere-viewer@3.2.4/dist/photo-sphere-viewer.min.js"></script>
    <!--<script src="http://ohsq4wr4p.bkt.clouddn.com/photo-sphere-viewer.min.js"></script>-->
</head>

<body style="margin:0;padding:0">
<!--<div class="bg" style="height: 0;width: 0;padding:0;margin:0;overflow: hidden;">-->
    <!--<img src="https://images.mafengwo.net/mobile/images/wo/profile_bg.jpg">-->
<!--</div>-->
<div id="vr-btn" style="position:absolute;height:100%;width:100%"></div>
<script>
    THREE.DeviceOrientationControls = function( object ) {

        var scope = this;

        this.object = object;
        this.object.rotation.reorder( "YXZ" );

        this.enabled = true;

        this.deviceOrientation = {};
        this.screenOrientation = 0;

        this.alphaOffset = 0; // radians

        var onDeviceOrientationChangeEvent = function( event ) {

            scope.deviceOrientation = event;

        };

        var onScreenOrientationChangeEvent = function() {

            scope.screenOrientation = window.orientation || 0;

        };

        // The angles alpha, beta and gamma form a set of intrinsic Tait-Bryan angles of type Z-X'-Y''

        var setObjectQuaternion = function() {

            var zee = new THREE.Vector3( 0, 0, 1 );

            var euler = new THREE.Euler();

            var q0 = new THREE.Quaternion();

            var q1 = new THREE.Quaternion( - Math.sqrt( 0.5 ), 0, 0, Math.sqrt( 0.5 ) ); // - PI/2 around the x-axis

            return function( quaternion, alpha, beta, gamma, orient ) {

                euler.set( beta, alpha, - gamma, 'YXZ' ); // 'ZXY' for the device, but 'YXZ' for us

                quaternion.setFromEuler( euler ); // orient the device

                quaternion.multiply( q1 ); // camera looks out the back of the device, not the top

                quaternion.multiply( q0.setFromAxisAngle( zee, - orient ) ); // adjust for screen orientation

            }

        }();

        this.connect = function() {

            onScreenOrientationChangeEvent(); // run once on load

            window.addEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );
            window.addEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );

            scope.enabled = true;

        };

        this.disconnect = function() {

            window.removeEventListener( 'orientationchange', onScreenOrientationChangeEvent, false );
            window.removeEventListener( 'deviceorientation', onDeviceOrientationChangeEvent, false );

            scope.enabled = false;

        };

        this.update = function() {

            if ( scope.enabled === false ) return;
            var alpha = scope.deviceOrientation.alpha ? THREE.Math.degToRad( scope.deviceOrientation.alpha ) + this.alphaOffset : 0; // Z
            var beta = scope.deviceOrientation.beta ? THREE.Math.degToRad( scope.deviceOrientation.beta ) : 0; // X'
            var gamma = scope.deviceOrientation.gamma ? THREE.Math.degToRad( scope.deviceOrientation.gamma ) : 0; // Y''
            var orient = scope.screenOrientation ? THREE.Math.degToRad( scope.screenOrientation ) : 0; // O

            setObjectQuaternion( scope.object.quaternion, alpha, beta, gamma, orient );

        };

        this.dispose = function() {

            this.disconnect();

        };

        this.connect();

    };
    var viewer = PhotoSphereViewer({
        container: 'vr-btn',
        navbar: ['gyroscope'],
        loading_txt: '官方小地方之VR',
        gyroscope: true,
        mousewheel: false,
//        mousemove: false,

//        time_anim:2000,
        time_anim: false,
//        panorama: 'http://ohsq4wr4p.bkt.clouddn.com/yingxiongbense-v1.jpg'
        panorama: 'http://b1-q.mafengwo.net/s11/M00/58/CC/wKgBEFpgVfOALwZyABYQ9ozAGEs96.jpeg'
    });
    viewer.on('panorama-loaded', function() {
        viewer.doControls.update();
        console.log(viewer.getNavbarButton("gyroscope")._onClick());
        console.log(viewer);
//        console.log($(viewer.navbar.items[0]).click());
//      if(window.orientation){
//          console.log(viewer);//.startGyroscopeControl();
//        console.log($(".psv-gyroscope-button").html());

//       $(".psv-gyroscope-button").click();
//
    });
</script>
<script>

</script>

</body>
</html>